# ObserverPattern

## Weather-O-Rama

---

**기상 조건(온도, 습도, 기압)이 바뀔경우 스테이션에 알려주는 기기 개발**

- 3가지 요소
    - 기상 스테이션
    - WeatherData 객체
    - 디스플레이 장비
    - 기상 스테이션과 WeatherData는 제공해주는 부분.
      display 기기에 표시하는 부분이 **우리가 개발해야하는 부분.**

## Observer 패턴 이해하기

---

**신문사 + 구독자 = 옵저버패턴**

- 구성요소
    - 신문사 ⇒ **주제(Subject)**
    - 구독자 ⇒ **옵저버(Observer)**
- 주제에서 중요한 데이터를 관리.
- 주제의 데이터가 바뀌면 옵저버에게 소식 전달.
- **주제를 구독하고 있는 옵저버에게 소식이 전달되었기에 전달받은 내용 갱신.(최신 데이터 유지)**

### 작동원리

- 주제는 옵저버들에게 데이터를 전달.
- 어떤 객체가 주제의 데이터를 전달받고 싶어하면 주제를 구독하면 됨.
- 주제의 데이터를 그만받고 싶으면 주제의 구독을 해제하면 됨.

### 옵저버 패턴

**객체의 상태가 바뀌면 그 객체에 의존하는 다른 객체에게 연락이 가고 자동으로 내용이 갱신되는 방식으로 일대다(one-to-many) 의존성을 정의**


## 느슨한 결합

---

- 한 객체가 다른 객체에 너무 의존적이면 **단단한 결합**이라 함.

### **느슨한 결합**

- 객체가 부서질 가능성이 낮음
- 객체의 세세한 부분까지 알 필요가 없음.
- **상호작용할 수 있지만 서로 잘 모르는 관계**
- 다른 객체와 상관없이 설계하면 변화에 더 잘 대응할 수 있는 디자인을 만들 수 있음. ⇒ **유연한 디자인**

### **옵저버 패턴에 적용한 내용**

- 주제는 옵저버가 특정 인터페이스(`Observer interface`)를 구현한다는 사실만 알고 있음.
- 옵저버는 언제든 추가/제거 가능
- 새로운 형식의 옵저버를 추가해도 **주제 변경 필요 없음**.
- 주제와 옵저버는 서로 독립적으로 **재사용**가능.
- 주제나 옵저버가 달라져도 서로에게 영향을 미치지 않음.

💡 상호작용하는 객체 사이에는 **느슨한 결합**을 사용해야함.


## 풀 방식으로 코드 바꾸기

---

- 이전까지의 방식
    - **주제가 옵저버에게 데이터를 보내는 푸시(PUSH)**
- 현재 사용할 방식
    - **옵저버가 주제로부터 데이터를 당겨오는 풀(PULL)**
